<launch>

  <arg name="camera" default="/stereo_forward/left"/>
  <arg name="image" default="image_rect_color"/>

  <node pkg="pattern_pose_estimation" type="marker_detector_node" name="marker_detector_ee">
    <remap from="image" to="$(arg camera)/$(arg image)" />
    <rosparam command="load" file="$(find triton_launchfiles)/etc/marker_detector_ee.yaml" />
    <param name="marker_frame" value="ee_marker"/>
    <param name="marker_msg" value="ar_pose_ee"/>    
  	<param name="use_history" type="bool" value="true"/>
  	<param name="cache_camera_info" type="bool" value="true"/>
  	<param name="lazy" type="bool" value="false"/>
  	<param name="rectified" type="bool" value="true"/>
    <param name="show_debug_image" value="true"/>
  </node>

  <node pkg="pattern_pose_estimation" type="marker_filter_node" name="marker_filter_endeffector" output="screen">
    <param name="frame_id" value="ee_marker"/>
    <param name="marker_msg" value="ar_pose_ee"/> 
    <param name="filter_mode" value="best"/>
    <param name="use_wwf" value="true"/>
    <param name="num_samples_wwf" value="10"/>
    <param name="ramp_wwf" value="0.5"/>
  </node>

  <!-- Stereo forward to stereo down transformation -->
  <node pkg="tf" type="static_transform_publisher" name="forward_to_down" args="0.00455061 -0.0513183 0.00208987 0.00696352 -0.038694 -0.00371097 stereo_forward_optical stereo_down_optical 100" />

</launch>
